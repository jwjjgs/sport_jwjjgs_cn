{"version":3,"sources":["pages/Home/index.js","pages/Login/index.js","pages/Map/index.js","Routes.js","boot.js","index.js"],"names":["VERSION","getRandom","n","m","Math","floor","random","getNearLoc","loc","limit","parseFloat","getUser","Promise","resolve","reject","axios","get","then","res","runningRule","rule","userCampus","valid","semesterRunningRecord","validRunningNum","total","goal","semesterGoal","catch","getStart","campusId","orgId","latitude","longitude","data","Object","assign","type","post","randomCircuit","getEnd","circuitString","distance","time","path","_circuitString","moment","format","circuitInfo","JSON","stringify","version","id","platform","stepRate","invalidReason","validDistance","phone","startTime","valueOf","endTime","add","calories","parseInt","totalTime","latitudeArr","longitudeArr","speedArr","segment","requireLatitude","requireLongitude","_path","parse","base64","decode","map","i","Array","isArray","j","speed","speedConfig","avg","length","start","_segment","index","push","md5","_data","keys","sort","item","Home","useState","list","setList","runningRecord","setRunninRecord","useRequest","obj","a","e","message","end","manual","onSuccess","success","listRun","onError","error","loading","run","pageNum","subtract","pageSize","items","listLoading","useEffect","title","subTitle","extra","to","direction","style","width","size","Text","href","onFinish","Item","name","addonBefore","placeholder","addonAfter","htmlType","block","itemLayout","dataSource","renderItem","Meta","avatar","CheckCircleTwoTone","twoToneColor","CloseCircleTwoTone","description","pathname","state","icon","EyeOutlined","Login","history","useHistory","orgs","setOrgs","params","orgType","label","value","url","method","result","token","localStorage","setItem","initialValues","username","password","rules","required","maxLength","Password","options","Map","props","info","setInfo","location","combine","arr","longitude_","reduce","latitude_","coords","AMapLoader","load","key","plugins","AMap","center","zoom","polyline","Polyline","strokeColor","strokeWeight","strokeStyle","console","log","onBack","ShareAltOutlined","onClick","warning","str","copy","encode","height","paddingTop","marginTop","Routes","component","render","getItem","router","HashRouter","defaults","withCredentials","baseURL","headers","interceptors","request","use","config","toLowerCase","authorization","response","code","_message","Msg","content","err","status","error_description","clear","ReactDOM","requestMethod","param","document","getElementById"],"mappings":"6ZAwBMA,EAAU,UAEVC,EAAY,SAACC,EAAGC,GAAJ,OAAUC,KAAKC,MAAMD,KAAKE,UAAYH,EAAID,EAAI,IAAMA,GAEhEK,EAAa,SAACC,GAAD,IAAMC,EAAN,uDAAc,IAAd,OACjBC,WAAWF,GAAOP,GAAW,EAAIQ,EAAOA,GAASA,EAAQ,KAqBrDE,EAAU,kBACd,IAAIC,SAAQ,SAACC,EAASC,GACpBC,IACGC,IAAI,gCACJC,MAAK,SAACC,GACL,MAIIA,EAHFC,YAAeC,EADjB,EACiBA,KAAMC,EADvB,EACuBA,WACqBC,EAExCJ,EAFFK,sBAAyBC,gBACYC,EACnCP,EADFC,YAAeO,KAAQC,aAGzBd,EAAQ,CACNO,OACAC,aACAC,QAAOG,aAGVG,OAAM,WACLd,GAAO,UAITe,EAAW,SAACC,EAAUC,GAAX,OACf,IAAInB,SAAQ,SAACC,EAASC,GACpB,IAAMN,EAAM,GACZ,OAAQuB,GACN,KAAK,IACHvB,EAAIwB,SAAJ,mBAA2B/B,EAAU,IAAO,QAC5CO,EAAIyB,UAAJ,oBAA6BhC,EAAU,IAAO,QAC9C,MACF,KAAK,GACHO,EAAIwB,SAAJ,mBAA2B/B,EAAU,IAAO,QAC5CO,EAAIyB,UAAJ,mBAA4BhC,EAAU,IAAO,QAC7C,MACF,KAAK,IACHO,EAAIwB,SAAJ,kBAA0B/B,EAAU,IAAO,QAC3CO,EAAIyB,UAAJ,oBAA6BhC,EAAU,IAAO,QAC9C,MACF,KAAK,IACHO,EAAIwB,SAAJ,mBAA2B/B,EAAU,IAAO,QAC5CO,EAAIyB,UAAJ,oBAA6BhC,EAAU,IAAO,QAC9C,MACF,KAAK,IACHO,EAAIwB,SAAJ,mBAA2B/B,EAAU,IAAO,QAC5CO,EAAIyB,UAAJ,oBAA6BhC,EAAU,IAAO,QAC9C,MACF,QACE,OAAOa,GAAO,GAElB,IAAMoB,EAAOC,OAAOC,OAClB,GACA,CACEN,WACAO,KAAM,GAJGF,OAAA,IAAAA,CAAA,GAON3B,IAGPO,IACGuB,KAAK,gCADR,eAC8CJ,IAC3CjB,MAAK,SAACC,GACL,IAAQqB,EAAkBrB,EAAlBqB,cAER1B,EAAQ,eAAK0B,OAEdX,OAAM,WACLd,GAAO,UAGT0B,EAAS,eAACC,EAAD,uDAAiB,GAAIC,EAArB,uDAAgC,EAAGC,EAAnC,uDAA0C,EAAGC,EAA7C,8CACb,IAAIhC,SAAQ,SAACC,EAASC,GAGpB,IAAM+B,EAAc,2BACfJ,GADe,IAElBE,KAAMG,MAASC,OAAO,yBAElBb,EAAO,CACXc,YAAa,CACXP,cAAeQ,KAAKC,UAAUL,IAEhCM,QAASnD,EACTsB,MAAO,EACP8B,GAAI,EACJf,KAAM,EACNgB,SAAU,EACVC,SAAUrD,EAAU,GAAI,IACxBsD,cAAe,GACfb,SAAUA,EACVc,cAAed,EACfe,MAAO,GACPC,UAAWZ,MAASa,UACpBC,QAASd,MAASe,IAAIlB,EAAM,WAAWgB,UACvCG,SAAUC,SAASrB,EAAW,IAC9BsB,UAAWrB,GAETsB,EAAc,GAChBC,EAAe,GACfC,EAAW,GACXC,EAAU,GACZ,EAA8CvB,EAAeN,cAArD8B,EAAR,EAAQA,gBAAiBC,EAAzB,EAAyBA,iBACzB,GAAK1B,EAcE,CACL,IAAM2B,EAAQtB,KAAKuB,MAAMC,IAAOC,OAAO9B,IACvCqB,EAAcM,EAAMvC,SAAS2C,KAAI,SAACC,GAAD,OAC/BC,MAAMC,QAAQF,GAAKA,EAAED,KAAI,SAACI,GAAD,OAAOxE,EAAWwE,MAAMxE,EAAWqE,MAE9DV,EAAeK,EAAMtC,UAAU0C,KAAI,SAACC,GAAD,OACjCC,MAAMC,QAAQF,GAAKA,EAAED,KAAI,SAACI,GAAD,OAAOxE,EAAWwE,MAAMxE,EAAWqE,MAE9DT,EAAWI,EAAMS,MAAML,KAAI,SAACC,GAAD,OACzBC,MAAMC,QAAQF,GAAKA,EAAED,KAAI,kBAAM1E,EAAU,EAAG,OAAO2E,KAErD,IAXK,EAWCK,EAAc,CAClBC,IAAKhD,EAAK8B,UAAYG,EAASgB,OAC/BC,MAAO,GAbJ,cAeSnB,GAfT,IAeL,2BAA2B,CAAC,IAAnBW,EAAkB,QACnBS,EAAW,GACjB,GAAIR,MAAMC,QAAQF,GAAI,CACpB,IAAK,IAAIU,EAAQ,EAAGA,EAAQV,EAAEO,OAAS,EAAGG,IACxCL,EAAYG,OAASH,EAAYC,IAAMjF,GAAW,GAAI,IACtDoF,EAASE,KAAKzC,MAASe,IAAIoB,EAAYG,MAAO,WAAWzB,WAE3DS,EAAQmB,KAAKF,KAtBZ,mCAdI,CACT,IAAK,IAAIT,EAAI,EAAGA,EAAI,EAAGA,IACrBX,EAAYsB,KAAKlB,EAAgBO,IACjCV,EAAaqB,KAAKjB,EAAiBM,IACnCT,EAASoB,KAAKtF,EAAU,EAAG,KAE7BgE,EAAc,CAACA,GACfC,EAAe,CAACA,GAChBE,EAAU,CACR,CACElC,EAAKwB,UAAYzD,EAAU,GAAI,KAC/BiC,EAAK0B,QAAU3D,EAAU,KAAM,QA8BrCiC,EAAKc,YAAL,2BACKd,EAAKc,aADV,IAEEhB,SAAUiC,EACVhC,UAAWiC,EACXE,QAASA,EACTY,MAAOb,EACPL,SAAUC,SAASrB,EAAW,MAEhCR,EAAKsD,IAAMA,IAAI,qBAAD,OACStD,EAAKqB,cADd,gBACmCrB,EAAK8B,UADxC,eACwD9B,EAAKQ,SAD7D,eAC4ER,EAAKG,KADjF,eAC4FH,EAAKwB,UADjG,eACiHxB,EAAK0B,QADtH,gBACqI1B,EAAKuB,MAD1I,OAGd,IAAMgC,EAAQ,GACdtD,OAAOuD,KAAKxD,GACTyD,OACAhB,KAAI,SAACiB,GAAD,OAAWH,EAAMG,GAAQ1D,EAAK0D,MACrC7E,IACGuB,KADH,+BACwCmD,GACrCxE,MAAK,SAACC,GACLL,EAAQK,MAETU,OAAM,WACLd,GAAO,UA4KA+E,MAxKf,WACE,MAAwBC,mBAAS,IAAjC,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAAyCF,mBAAS,CAChDxE,MAAO,EACPG,MAAO,IAFT,mBAAOwE,EAAP,KAAsBC,EAAtB,KAKA,EAAyBC,aACvB,SAACC,GACC,OAAO,IAAIxF,QAAJ,uCAAY,WAAOC,EAASC,GAAhB,2BAAAuF,EAAA,6DAET3D,EAAyB0D,EAAzB1D,SAAUC,EAAeyD,EAAfzD,KAAMC,EAASwD,EAATxD,KAFP,SAKSjC,IAAUiB,OAAM,kBACxCd,EAAO,uDANQ,cAKXK,EALW,gBAUWU,EAC1BV,EAAYC,KAAKU,SACjBX,EAAYC,KAAKW,OACjBH,OAAM,kBAAMd,EAAO,uDAbJ,cAUXyB,EAVW,gBAgBCC,EAChB,CAAErB,cAAaoB,iBACfG,EACAC,EACAC,GACAhB,OAAM,SAAC0E,GACPxF,EAAO,uCAAD,OAAUwF,EAAEC,aAtBH,OAgBXC,EAhBW,OAwBTjD,EAAyBiD,EAAzBjD,cACM,IADmBiD,EAAVlF,MACNT,GAAQ,GACpBC,EAAOyC,GA1BK,4CAAZ,2DA6BT,CACEkD,QAAQ,EACRC,UAAW,WACTH,IAAQI,QAAQ,4BAChBC,KAEFC,QAAS,SAACP,GACRC,IAAQO,MAAMR,GACdM,OAvCEG,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,IA4CjB,EAA+Cb,aAAW,kBA9O3Cc,EA8OyD,EA7OxE,IAAIrG,SAAQ,SAACC,EAASC,GACpB,IAAM4C,EAAYZ,MAASoE,SAAS,IAAK,QAAQvD,UAC3CC,EAAUd,MAASa,UACzB5C,IACGuB,KAAK,oCAAqC,CACzC2E,UACAE,SAAU,IACVzD,YACAE,YAED3C,MAAK,SAACC,GACLL,EAAQK,EAAIkG,UAEbxF,OAAM,WACLd,EAAO,8CAfC,IAACmG,IA8O6D,CAC1ER,QAAQ,EACRC,UAAW,SAACxF,GACV8E,EAAQ9E,IAEV2F,QAAS,SAACP,GACRC,IAAQO,MAAMR,MANDe,EAAjB,EAAQN,QAA2BH,EAAnC,EAA8BI,IAoB9B,OAVAM,qBAAU,WACRV,IACAjG,IAAUM,MAAK,SAAAC,GACbgF,EAAgB,CACd5E,MAAOJ,EAAII,MACXG,MAAOP,EAAIO,aAGd,IAGD,mCACE,cAAC,IAAD,CACE8F,MAAM,eACNC,SAAS,2BACTC,MACE,cAAC,IAAD,CAAMC,GAAG,SAAT,SACE,cAAC,IAAD,CAAQrF,KAAK,OAAb,wCALN,SASE,eAAC,IAAD,CAAOsF,UAAU,WAAWC,MAAO,CAAEC,MAAO,QAAUC,KAAK,QAA3D,UACE,eAAC,IAAD,CAAMP,MAAM,eAAKE,MAAO,oEAAxB,UACE,eAAC,IAAWM,KAAZ,gKAEE,0BAEF,eAAC,IAAWA,KAAZ,8IAEE,0BAEF,eAAC,IAAWA,KAAZ,sNAEE,0BAEF,eAAC,IAAWA,KAAZ,uBAEE,mBAAGC,KAAK,4CAAR,uFAGA,6BAGJ,cAAC,IAAD,CAAMT,MAAM,eAAZ,SACE,eAAC,IAAD,CACEU,SAAU,SAAC3B,GACTU,EAAIV,IAFR,UAKE,cAAC,IAAK4B,KAAN,CAAWC,KAAK,OAAhB,SACE,cAAC,IAAD,CAAOC,YAAY,eAAKC,YAAY,+DAEtC,cAAC,IAAKH,KAAN,CAAWC,KAAK,WAAhB,SACE,cAAC,IAAD,CAAOC,YAAY,eAAKE,WAAW,aAErC,cAAC,IAAKJ,KAAN,CAAWC,KAAK,OAAhB,SACE,cAAC,IAAD,CAAOC,YAAY,eAAKE,WAAW,aAErC,cAAC,IAAKJ,KAAN,UACE,eAAC,IAAD,CACEK,SAAS,SACTlG,KAAK,UACLmG,OAAK,EACLzB,QAASA,EAJX,oCAMSd,EAAc3E,MANvB,YAMgC2E,EAAcxE,OAN9C,cAYN,cAAC,IAAD,CACEsF,QAASM,EACToB,WAAW,aACXC,WAAY3C,EACZ4C,WAAY,SAAC/C,GAAD,OACV,eAAC,IAAKsC,KAAN,WACE,cAAC,IAAKA,KAAKU,KAAX,CACEC,OACiB,IAAfjD,EAAKtE,MACH,cAACwH,EAAA,EAAD,CAAoBC,aAAa,YAEjC,cAACC,EAAA,EAAD,CAAoBD,aAAa,YAGrCxB,MAAK,uBAAQ3B,EAAKpC,cAAb,+BAAkCoC,EAAK5B,WAAa,IAAMD,SAAS6B,EAAK5B,UAAY,IAAM,UAA1F,OACC4B,EAAK5B,UAAY,GAAM,UAC7BiF,YAAarD,EAAKlC,YAEpB,cAAC,IAAD,CACEgE,GAAI,CACFwB,SAAU,OACVC,MAAO,CACLnG,YAAaC,KAAKuB,MAAMoB,EAAK5C,eAJnC,SAQE,cAAC,IAAD,CAAQoG,KAAM,cAACC,EAAA,EAAD,IAAiBhH,KAAK,yB,QC/SvCiH,MApEf,WACE,IAAMC,EAAUC,cAChB,EAAwB1D,mBAAS,IAAjC,mBAAO2D,EAAP,KAAaC,EAAb,KACApC,qBAAU,WACRvG,IACGC,IAAI,mCAAoC,CACvC2I,OAAQ,CACNC,QAAS,KAGZ3I,MAAK,SAACC,GACLwI,EAAQxI,EAAIyD,KAAI,SAACC,GAAD,MAAQ,CAAEiF,MAAOjF,EAAEuD,KAAM2B,MAAOlF,EAAExB,aAErD,IAEH,MAAyB+C,aACvB,SAACC,GAAD,MAAU,CACR2D,IAAK,uBACLC,OAAQ,OACR9H,KAAK,eAAMkE,MAEb,CACEK,QAAQ,EACRC,UAAW,SAACuD,GACV,IAAQC,EAAUD,EAAVC,MACRC,aAAaC,QAAQ,QAArB,iBAAwCF,IACxC3D,IAAQI,QAAQ,4BAChB4C,EAAQhE,KAAK,QAZXwB,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,IAiBjB,OACE,mCACE,cAAC,IAAD,CAAYO,MAAM,eAAlB,SACE,eAAC,IAAD,CACEU,SAAU,SAAC3B,GAAD,OAAOU,EAAIV,IACrB+D,cAAe,CAAEC,SAAU,GAAIC,SAAU,IAF3C,UAIE,cAAC,IAAKrC,KAAN,CACEC,KAAK,WACLqC,MAAO,CAAC,CAAEC,UAAU,EAAMlE,QAAS,mCAFrC,SAIE,cAAC,IAAD,CAAO6B,YAAY,eAAK/F,KAAK,MAAMqI,UAAW,OAEhD,cAAC,IAAKxC,KAAN,CACEC,KAAK,WACLuC,UAAW,GACXF,MAAO,CAAC,CAAEC,UAAU,EAAMlE,QAAS,mCAHrC,SAKE,cAAC,IAAMoE,SAAP,CAAgBvC,YAAY,mBAE9B,cAAC,IAAKF,KAAN,CACEC,KAAK,QACLqC,MAAO,CAAC,CAAEC,UAAU,EAAMlE,QAAS,mCAFrC,SAIE,cAAC,IAAD,CAAQqE,QAASnB,MAEnB,cAAC,IAAKvB,KAAN,UACE,cAAC,IAAD,CAAQK,SAAS,SAASlG,KAAK,UAAUmG,OAAK,EAACzB,QAASA,EAAxD,oC,sDCkCG8D,MA3Ff,SAAaC,GACX,MAAwBhF,mBAAS,MAAjC,mBAAOiF,EAAP,KAAaC,EAAb,KAiDA,OAhDA1D,qBAAU,WACR,IAEE,MAMIwD,EALFG,SACE9B,MACEnG,YAAef,EAHrB,EAGqBA,UAAWD,EAHhC,EAGgCA,SAAUgD,EAH1C,EAG0CA,MAI1CgG,EAAQ,CAAE/I,YAAWD,WAAUgD,UAY/B,IAVA,IAAMkG,EAAU,SAACC,EAAKvG,GAGpB,OAFIC,MAAMC,QAAQF,GAAIuG,EAAI5F,KAAJ,MAAA4F,EAAG,YAASvG,IAC7BuG,EAAI5F,KAAKX,GACPuG,GAEHC,EAAanJ,EAAUoJ,OAAOH,EAAS,IACvCI,EAAYtJ,EAASqJ,OAAOH,EAAS,IAGrCK,EAAS,GACN3G,EAAI,EAAGA,EAAIwG,EAAWjG,OAAQP,IACrC2G,EAAOhG,KAAK,CAAC6F,EAAWxG,GAAI0G,EAAU1G,KACpC2G,EAAOpG,OAAS,GAClBqG,IAAWC,KAAK,CACdC,IAAK,mCACLC,QAAS,KAER1K,MAAK,SAAC2K,GACL,IAAMjH,EAAM,IAAIiH,EAAKf,IAAI,MAAO,CAC9BgB,OAAQN,EAAO,GACfO,KAAM,KAEFC,EAAW,IAAIH,EAAKI,SAAS,CACjCpJ,KAAM2I,EACNU,YAAa,UACbC,aAAc,EACdC,YAAa,UAEfxH,EAAId,IAAIkI,MAETnK,OAAM,SAAC0E,GACN8F,QAAQC,IAAI/F,MAGlB,aACD,CAACwE,IAEF,qCACE,cAAC,IAAD,CACEvD,MAAM,2BACN+E,OAAQ,WACNxB,EAAMvB,QAAQhE,KAAK,MAErBkC,MAAO,CACL,cAAC,IAAD,CAEEpF,KAAK,OACL+G,KAAM,cAACmD,EAAA,EAAD,IACNC,QAAS,WACP,IACE,IAAKzB,EAEH,YADAxE,IAAQkG,QAAQ,4BAGlB,IAAMC,EAAMzJ,KAAKC,UAAU6H,GAC3B4B,IAAKlI,IAAOmI,OAAOF,IACnBnG,IAAQI,QAAQ,4BAChB,SACAJ,IAAQkG,QAAQ,+BAbhB,aAmBV,qBACE7E,MAAO,CACLiF,OAAQ,QACRC,WAAY,OACZC,UAAW,SAJf,SAOE,qBAAK3J,GAAG,MAAMwE,MAAO,CAAEiF,OAAQ,gBChExBG,MAtBf,WACE,OACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOpK,KAAK,SAASqK,UAAW3D,IAChC,cAAC,IAAD,CACE1G,KAAK,IACLsK,OAAQ,kBACL/C,aAAagD,QAAQ,SAGpB,eAAC,IAAD,WACE,cAAC,IAAD,CAAOvK,KAAK,OAAOqK,UAAWpC,IAC9B,cAAC,IAAD,CAAOjI,KAAK,IAAIqK,UAAWpH,OAJ7B,cAAC,IAAD,CAAU6B,GAAG,oBCXrB0F,EAAS,IAAIC,IAEnBtM,IAAMuM,SAASC,iBAAkB,EACjCxM,IAAMuM,SAASE,QAAU,yBACzBzM,IAAMuM,SAASG,QAAQnL,KAAK,gBAC1B,mCACFvB,IAAM2M,aAAaC,QAAQC,KAAI,SAACC,GAC1B,SAAWA,EAAO7D,OAAO8D,eAAwC,kBAAhBD,EAAO3L,OAC1D2L,EAAO3L,KAAOe,KAAKC,UAAU2K,EAAO3L,OACtC,IAAMgI,EAAQC,aAAagD,QAAQ,SAEnC,OADIjD,IAAO2D,EAAOJ,QAAQM,cAAgB7D,GACnC2D,KAGT9M,IAAM2M,aAAaM,SAASJ,KAC1B,SAAC1M,GACC,MAEIA,EADFgB,KAAQ+L,EADV,EACUA,KAAM1H,EADhB,EACgBA,QAASrE,EADzB,EACyBA,KAEzB,GAAa,IAAT+L,EAAY,CACd,IAAMC,EAAW3H,GAAW,2BAK5B,OAJA4H,IAAI1B,QAAQ,CACV2B,QAASF,EACTxC,IAAKwC,IAEAtN,QAAQE,SAOjB,OALIyF,GACF4H,IAAIxH,QAAQ,CACVyH,QAAS7H,EACTmF,IAAKnF,IAEFrE,KAET,SAACmM,GACC,MAKIA,EAJFL,SACEM,EAFJ,EAEIA,OACQC,EAHZ,EAGIrM,KAAQqM,kBAGZ,GAAe,MAAXD,EAAgB,CAClB,IAAMJ,EAAW,2BACjBC,IAAI1B,QAAQ,CACV2B,QAASF,EACTxC,IAAKwC,IAEP/D,aAAaqE,MAAM,SACnBpB,EAAO7D,QAAQhE,KAAK,cACf,CACL,IAAM2I,EAAWK,EACjBJ,IAAI1B,QAAQ,CACV2B,QAASF,EACTxC,IAAKwC,QCjDbO,IAASvB,OACP,cAAC,IAAD,CACEpD,MAAO,CACL4E,cAAe,SAACC,GAAD,OAAW5N,IAAM4N,KAFpC,SAKE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.727b8932.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, Switch } from \"react-router-dom\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  Form,\r\n  Input,\r\n  List,\r\n  message,\r\n  PageHeader,\r\n  Space,\r\n  Typography,\r\n} from \"antd\";\r\nimport {\r\n  CloseCircleTwoTone,\r\n  CheckCircleTwoTone,\r\n  EyeOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { useRequest } from \"ahooks\";\r\nimport axios from \"axios\";\r\nimport moment from \"moment\";\r\nimport md5 from \"js-md5\";\r\nimport { Base64 as base64 } from \"js-base64\";\r\n\r\nconst VERSION = \"V 2.5.6\";\r\n\r\nconst getRandom = (n, m) => Math.floor(Math.random() * (m - n + 1)) + n;\r\n\r\nconst getNearLoc = (loc, limit = 1000) =>\r\n  parseFloat(loc) + getRandom(-1 * limit, limit) / limit / 10000000;\r\n\r\nconst getList = (pageNum) =>\r\n  new Promise((resolve, reject) => {\r\n    const startTime = moment().subtract(720, \"days\").valueOf();\r\n    const endTime = moment().valueOf();\r\n    axios\r\n      .post(\"running/api/v1/running/recordList\", {\r\n        pageNum,\r\n        pageSize: 100,\r\n        startTime,\r\n        endTime,\r\n      })\r\n      .then((res) => {\r\n        resolve(res.items);\r\n      })\r\n      .catch(() => {\r\n        reject(\"获取列表失败\");\r\n      });\r\n  });\r\n\r\nconst getUser = () =>\r\n  new Promise((resolve, reject) => {\r\n    axios\r\n      .get(\"/health/api/v1/homePage/user\")\r\n      .then((res) => {\r\n        const {\r\n          runningRule: { rule, userCampus },\r\n          semesterRunningRecord: { validRunningNum: valid },\r\n          runningRule: { goal: { semesterGoal: total } }\r\n        } = res;\r\n        //{rule:{},userCampus:{}}\r\n        resolve({\r\n          rule,\r\n          userCampus,\r\n          valid, total\r\n        });\r\n      })\r\n      .catch(() => {\r\n        reject(false);\r\n      });\r\n  });\r\n\r\nconst getStart = (campusId, orgId) =>\r\n  new Promise((resolve, reject) => {\r\n    const loc = {};\r\n    switch (orgId) {\r\n      case 368:\r\n        loc.latitude = `30.786842${getRandom(10000, 99999)}`;\r\n        loc.longitude = `103.886128${getRandom(10000, 99999)}`;\r\n        break;\r\n      case 53:\r\n        loc.latitude = `30.826795${getRandom(10000, 99999)}`;\r\n        loc.longitude = `104.18535${getRandom(10000, 99999)}`;\r\n        break;\r\n      case 444:\r\n        loc.latitude = `30.82454${getRandom(10000, 99999)}`;\r\n        loc.longitude = `106.118579${getRandom(10000, 99999)}`;\r\n        break;\r\n      case 386:\r\n        loc.latitude = `30.728711${getRandom(10000, 99999)}`;\r\n        loc.longitude = `103.965401${getRandom(10000, 99999)}`;\r\n        break;\r\n      case 418:\r\n        loc.latitude = `30.764069${getRandom(10000, 99999)}`;\r\n        loc.longitude = `103.985006${getRandom(10000, 99999)}`;\r\n        break;\r\n      default:\r\n        return reject(false);\r\n    }\r\n    const data = Object.assign(\r\n      {},\r\n      {\r\n        campusId,\r\n        type: 1,\r\n      },\r\n      {\r\n        ...loc,\r\n      }\r\n    );\r\n    axios\r\n      .post(\"/running/api/v1/running/start\", { ...data })\r\n      .then((res) => {\r\n        const { randomCircuit } = res;\r\n        //{...randomCircuit}\r\n        resolve({ ...randomCircuit });\r\n      })\r\n      .catch(() => {\r\n        reject(false);\r\n      });\r\n  });\r\nconst getEnd = (circuitString = {}, distance = 0, time = 0, path) =>\r\n  new Promise((resolve, reject) => {\r\n    //circuitString = { runningRule, randomCircuit }\r\n    //{runningRule:{rule:{},userCampus:{}},randomCircuit:{}}\r\n    const _circuitString = {\r\n      ...circuitString,\r\n      time: moment().format(\"YYYY-MM-DD HH:mm:ss\"),\r\n    };\r\n    const data = {\r\n      circuitInfo: {\r\n        circuitString: JSON.stringify(_circuitString),\r\n      },\r\n      version: VERSION,\r\n      valid: 1,\r\n      id: 1,\r\n      type: 1,\r\n      platform: 1,\r\n      stepRate: getRandom(40, 80),\r\n      invalidReason: \"\",\r\n      distance: distance,\r\n      validDistance: distance,\r\n      phone: \"\",\r\n      startTime: moment().valueOf(),\r\n      endTime: moment().add(time, \"seconds\").valueOf(),\r\n      calories: parseInt(distance / 20),\r\n      totalTime: time,\r\n    };\r\n    let latitudeArr = [],\r\n      longitudeArr = [],\r\n      speedArr = [],\r\n      segment = [];\r\n    const { requireLatitude, requireLongitude } = _circuitString.randomCircuit;\r\n    if (!path) {\r\n      for (let i = 0; i < 3; i++) {\r\n        latitudeArr.push(requireLatitude[i]);\r\n        longitudeArr.push(requireLongitude[i]);\r\n        speedArr.push(getRandom(2, 20));\r\n      }\r\n      latitudeArr = [latitudeArr];\r\n      longitudeArr = [longitudeArr];\r\n      segment = [\r\n        [\r\n          data.startTime + getRandom(10, 100),\r\n          data.endTime - getRandom(1500, 2500),\r\n        ],\r\n      ];\r\n    } else {\r\n      const _path = JSON.parse(base64.decode(path));\r\n      latitudeArr = _path.latitude.map((i) =>\r\n        Array.isArray(i) ? i.map((j) => getNearLoc(j)) : getNearLoc(i)\r\n      );\r\n      longitudeArr = _path.longitude.map((i) =>\r\n        Array.isArray(i) ? i.map((j) => getNearLoc(j)) : getNearLoc(i)\r\n      );\r\n      speedArr = _path.speed.map((i) =>\r\n        Array.isArray(i) ? i.map(() => getRandom(2, 20)) : i\r\n      );\r\n      const speedConfig = {\r\n        avg: data.totalTime / speedArr.length,\r\n        start: 0,\r\n      };\r\n      for (let i of latitudeArr) {\r\n        const _segment = [];\r\n        if (Array.isArray(i)) {\r\n          for (let index = 0; index < i.length - 1; index++) {\r\n            speedConfig.start += speedConfig.avg + getRandom(-10, 10);\r\n            _segment.push(moment().add(speedConfig.start, \"seconds\").valueOf());\r\n          }\r\n          segment.push(_segment);\r\n        }\r\n      }\r\n    }\r\n\r\n    data.circuitInfo = {\r\n      ...data.circuitInfo,\r\n      latitude: latitudeArr,\r\n      longitude: longitudeArr,\r\n      segment: segment,\r\n      speed: speedArr,\r\n      calories: parseInt(distance / 20),\r\n    };\r\n    data.md5 = md5(\r\n      `EndRunningInfo{a='${data.invalidReason}', b=${data.totalTime}, c=${data.distance}, d=${data.type}, e=${data.startTime}, f=${data.endTime}, g='${data.phone}'}`\r\n    );\r\n    const _data = {};\r\n    Object.keys(data)\r\n      .sort()\r\n      .map((item) => (_data[item] = data[item]));\r\n    axios\r\n      .post(`/running/api/v1/running/end3`, _data)\r\n      .then((res) => {\r\n        resolve(res);\r\n      })\r\n      .catch(() => {\r\n        reject(false);\r\n      });\r\n  });\r\n\r\nfunction Home() {\r\n  const [list, setList] = useState([]);\r\n  const [runningRecord, setRunninRecord] = useState({\r\n    valid: 0,\r\n    total: 0,\r\n  })\r\n\r\n  const { loading, run } = useRequest(\r\n    (obj) => {\r\n      return new Promise(async (resolve, reject) => {\r\n        //判断是否有导入路线\r\n        const { distance, time, path } = obj;\r\n\r\n        //获取用户信息\r\n        const runningRule = await getUser().catch(() =>\r\n          reject(\"获取用户信息失败\")\r\n        );\r\n\r\n        //获取跑步信息\r\n        const randomCircuit = await getStart(\r\n          runningRule.rule.campusId,\r\n          runningRule.rule.orgId\r\n        ).catch(() => reject(\"获取跑步信息失败\"));\r\n\r\n        //提交跑步信息\r\n        const end = await getEnd(\r\n          { runningRule, randomCircuit },\r\n          distance,\r\n          time,\r\n          path\r\n        ).catch((e) => {\r\n          reject(`结束跑步失败${e.message}`);\r\n        });\r\n        const { invalidReason, valid } = end;\r\n        if (valid === 1) resolve(true);\r\n        else reject(invalidReason);\r\n      });\r\n    },\r\n    {\r\n      manual: true,\r\n      onSuccess: () => {\r\n        message.success(\"跑步完成\");\r\n        listRun();\r\n      },\r\n      onError: (e) => {\r\n        message.error(e);\r\n        listRun();\r\n      },\r\n    }\r\n  );\r\n\r\n  const { loading: listLoading, run: listRun } = useRequest(() => getList(1), {\r\n    manual: true,\r\n    onSuccess: (res) => {\r\n      setList(res);\r\n    },\r\n    onError: (e) => {\r\n      message.error(e);\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    listRun();\r\n    getUser().then(res => {\r\n      setRunninRecord({\r\n        valid: res.valid,\r\n        total: res.total\r\n      })\r\n    })\r\n  }, []); //eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  return (\r\n    <>\r\n      <PageHeader\r\n        title=\"乐健\"\r\n        subTitle=\"完全免费\"\r\n        extra={\r\n          <Link to=\"/login\">\r\n            <Button type=\"link\">切换账号</Button>\r\n          </Link>\r\n        }\r\n      >\r\n        <Space direction=\"vertical\" style={{ width: \"100%\" }} size=\"large\">\r\n          <Card title=\"告知\" extra={<b>最后更新 2021/03/24</b>}>\r\n            <Typography.Text>\r\n              1.本功能属于纯前端实现，不存在收集，保留用户信息等\r\n              <br />\r\n            </Typography.Text>\r\n            <Typography.Text>\r\n              2.仅供学习研究使用，切勿用于非法或商业等用途\r\n              <br />\r\n            </Typography.Text>\r\n            <Typography.Text>\r\n              3.完全免费开源，请勿上当受骗，如果你是收费看到页面，请及时举报诈骗者\r\n              <br />\r\n            </Typography.Text>\r\n            <Typography.Text>\r\n              4.github:\r\n              <a href=\"https://github.com/jwjjgs/sport_jwjjgs_cn\">\r\n                点我查看开源代码/更新日志\r\n              </a>\r\n              <br />\r\n            </Typography.Text>\r\n          </Card>\r\n          <Card title=\"功能\">\r\n            <Form\r\n              onFinish={(e) => {\r\n                run(e);\r\n              }}\r\n            >\r\n              <Form.Item name=\"path\">\r\n                <Input addonBefore=\"轨迹\" placeholder=\"请粘贴导出轨迹(选填)\" />\r\n              </Form.Item>\r\n              <Form.Item name=\"distance\">\r\n                <Input addonBefore=\"距离\" addonAfter=\"米\" />\r\n              </Form.Item>\r\n              <Form.Item name=\"time\">\r\n                <Input addonBefore=\"时间\" addonAfter=\"秒\" />\r\n              </Form.Item>\r\n              <Form.Item>\r\n                <Button\r\n                  htmlType=\"submit\"\r\n                  type=\"primary\"\r\n                  block\r\n                  loading={loading}\r\n                >\r\n                  奔跑({`${runningRecord.valid}/${runningRecord.total}`})\r\n                </Button>\r\n              </Form.Item>\r\n            </Form>\r\n          </Card>\r\n\r\n          <List\r\n            loading={listLoading}\r\n            itemLayout=\"horizontal\"\r\n            dataSource={list}\r\n            renderItem={(item) => (\r\n              <List.Item>\r\n                <List.Item.Meta\r\n                  avatar={\r\n                    item.valid === 1 ? (\r\n                      <CheckCircleTwoTone twoToneColor=\"#52c41a\" />\r\n                    ) : (\r\n                      <CloseCircleTwoTone twoToneColor=\"#eb2f96\" />\r\n                    )\r\n                  }\r\n                  title={`距离:${item.validDistance}米 时间:${item.totalTime >= 60 && parseInt(item.totalTime / 60) + \"分\"\r\n                    }${(item.totalTime % 60) + \"秒\"}`}\r\n                  description={item.startTime}\r\n                />\r\n                <Link\r\n                  to={{\r\n                    pathname: \"/map\",\r\n                    state: {\r\n                      circuitInfo: JSON.parse(item.circuitInfo),\r\n                    },\r\n                  }}\r\n                >\r\n                  <Button icon={<EyeOutlined />} type=\"link\"></Button>\r\n                </Link>\r\n              </List.Item>\r\n            )}\r\n          />\r\n        </Space>\r\n      </PageHeader>\r\n    </>\r\n  );\r\n}\r\nexport default Home;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button, Form, Input, message, PageHeader, Select } from \"antd\";\r\nimport { useRequest } from \"ahooks\";\r\nimport { useHistory } from \"react-router\";\r\nimport axios from \"axios\";\r\nfunction Login() {\r\n  const history = useHistory();\r\n  const [orgs, setOrgs] = useState([]);\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"/health/api/v2/organization/list\", {\r\n        params: {\r\n          orgType: 1,\r\n        },\r\n      })\r\n      .then((res) => {\r\n        setOrgs(res.map((i) => ({ label: i.name, value: i.id })));\r\n      });\r\n  }, []);\r\n\r\n  const { loading, run } = useRequest(\r\n    (obj) => ({\r\n      url: \"/health/api/v1/login\",\r\n      method: \"post\",\r\n      data: { ...obj },\r\n    }),\r\n    {\r\n      manual: true,\r\n      onSuccess: (result) => {\r\n        const { token } = result;\r\n        localStorage.setItem(\"token\", `Bearer ${token}`);\r\n        message.success(\"登陆成功\");\r\n        history.push(\"/\");\r\n      },\r\n    }\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <PageHeader title=\"登录\">\r\n        <Form\r\n          onFinish={(e) => run(e)}\r\n          initialValues={{ username: \"\", password: \"\" }}\r\n        >\r\n          <Form.Item\r\n            name=\"username\"\r\n            rules={[{ required: true, message: \"请输入账号\" }]}\r\n          >\r\n            <Input addonBefore=\"账号\" type=\"tel\" maxLength={11} />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"password\"\r\n            maxLength={16}\r\n            rules={[{ required: true, message: \"请输入密码\" }]}\r\n          >\r\n            <Input.Password addonBefore=\"密码\" />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"orgId\"\r\n            rules={[{ required: true, message: \"请选择地区\" }]}\r\n          >\r\n            <Select options={orgs} />\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Button htmlType=\"submit\" type=\"primary\" block loading={loading}>\r\n              登录\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </PageHeader>\r\n    </>\r\n  );\r\n}\r\nexport default Login;\r\n","import { Button, message, PageHeader } from \"antd\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport AMapLoader from \"@amap/amap-jsapi-loader\";\r\nimport { ShareAltOutlined } from \"@ant-design/icons\";\r\nimport copy from \"copy-to-clipboard\";\r\nimport { Base64 as base64 } from \"js-base64\";\r\n\r\nfunction Map(props) {\r\n  const [info, setInfo] = useState(null);\r\n  useEffect(() => {\r\n    try {\r\n      //得到传入数据\r\n      const {\r\n        location: {\r\n          state: {\r\n            circuitInfo: { longitude, latitude, speed },\r\n          },\r\n        },\r\n      } = props;\r\n      setInfo({ longitude, latitude, speed });\r\n      //将传入数据 longitude = [[...],[...],...]  ... 转为一维数组\r\n      const combine = (arr, i) => {\r\n        if (Array.isArray(i)) arr.push(...i);\r\n        else arr.push(i);\r\n        return arr;\r\n      };\r\n      const longitude_ = longitude.reduce(combine, []);\r\n      const latitude_ = latitude.reduce(combine, []);\r\n\r\n      //将两个一维数组转字符串[]\r\n      const coords = [];\r\n      for (let i = 0; i < longitude_.length; i++)\r\n        coords.push([longitude_[i], latitude_[i]]);\r\n      if (coords.length > 0) {\r\n        AMapLoader.load({\r\n          key: \"3f3868abdb36336114bde5ab6eecdb68\", // 申请好的Web端开发者Key，首次调用 load 时必填\r\n          plugins: [], // 需要使用的的插件列表，如比例尺'AMap.Scale'等\r\n        })\r\n          .then((AMap) => {\r\n            const map = new AMap.Map(\"map\", {\r\n              center: coords[0],\r\n              zoom: 17,\r\n            });\r\n            const polyline = new AMap.Polyline({\r\n              path: coords, //设置线覆盖物路径\r\n              strokeColor: \"#3366FF\", //线颜色\r\n              strokeWeight: 3, //线宽\r\n              strokeStyle: \"solid\", //线样式\r\n            });\r\n            map.add(polyline);\r\n          })\r\n          .catch((e) => {\r\n            console.log(e);\r\n          });\r\n      }\r\n    } catch {}\r\n  }, [props]);\r\n  return (\r\n    <>\r\n      <PageHeader\r\n        title=\"轨迹显示\"\r\n        onBack={() => {\r\n          props.history.push(\"/\");\r\n        }}\r\n        extra={[\r\n          <Button\r\n            key=\"export\"\r\n            type=\"link\"\r\n            icon={<ShareAltOutlined />}\r\n            onClick={() => {\r\n              try {\r\n                if (!info) {\r\n                  message.warning(\"导出失败\");\r\n                  return;\r\n                }\r\n                const str = JSON.stringify(info);\r\n                copy(base64.encode(str));\r\n                message.success(\"导出成功\");\r\n              } catch {\r\n                message.warning(\"导出失败\");\r\n              }\r\n            }}\r\n          ></Button>,\r\n        ]}\r\n      />\r\n      <div\r\n        style={{\r\n          height: \"100vh\",\r\n          paddingTop: \"72px\",\r\n          marginTop: \"-72px\",\r\n        }}\r\n      >\r\n        <div id=\"map\" style={{ height: \"100%\" }}></div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Map;\r\n","import React from \"react\";\r\nimport { HashRouter, Redirect, Route, Switch } from \"react-router-dom\";\r\nimport Home from \"./pages/Home\";\r\nimport Login from \"./pages/Login\";\r\nimport Map from \"./pages/Map\";\r\n\r\nfunction Routes() {\r\n  return (\r\n    <HashRouter>\r\n      <Switch>\r\n        <Route path=\"/login\" component={Login} />\r\n        <Route\r\n          path=\"/\"\r\n          render={() =>\r\n            !localStorage.getItem(\"token\") ? (\r\n              <Redirect to=\"/login\" />\r\n            ) : (\r\n              <Switch>\r\n                <Route path=\"/map\" component={Map} />\r\n                <Route path=\"/\" component={Home} />\r\n              </Switch>\r\n            )\r\n          }\r\n        />\r\n      </Switch>\r\n    </HashRouter>\r\n  );\r\n}\r\nexport default Routes;\r\n","import { message as Msg } from \"antd\";\r\nimport axios from \"axios\";\r\nimport { HashRouter } from \"react-router-dom\";\r\n\r\nconst router = new HashRouter();\r\n\r\naxios.defaults.withCredentials = false;\r\naxios.defaults.baseURL = \"https://upes.legym.cn/\";\r\naxios.defaults.headers.post[\"Content-Type\"] =\r\n  \"application/json;; charset=utf-8\";\r\naxios.interceptors.request.use((config) => {\r\n  if (\"post\" === config.method.toLowerCase() && typeof config.data === \"object\")\r\n    config.data = JSON.stringify(config.data);\r\n  const token = localStorage.getItem(\"token\");\r\n  if (token) config.headers.authorization = token;\r\n  return config;\r\n});\r\n\r\naxios.interceptors.response.use(\r\n  (res) => {\r\n    const {\r\n      data: { code, message, data },\r\n    } = res;\r\n    if (code !== 0) {\r\n      const _message = message || \"未知原因\";\r\n      Msg.warning({\r\n        content: _message,\r\n        key: _message,\r\n      });\r\n      return Promise.reject();\r\n    }\r\n    if (message)\r\n      Msg.success({\r\n        content: message,\r\n        key: message,\r\n      });\r\n    return data;\r\n  },\r\n  (err) => {\r\n    const {\r\n      response: {\r\n        status,\r\n        data: { error_description },\r\n      },\r\n    } = err;\r\n    if (status === 401) {\r\n      const _message = \"登录失效\";\r\n      Msg.warning({\r\n        content: _message,\r\n        key: _message,\r\n      });\r\n      localStorage.clear(\"token\");\r\n      router.history.push(\"/login\");\r\n    } else {\r\n      const _message = error_description;\r\n      Msg.warning({\r\n        content: _message,\r\n        key: _message,\r\n      });\r\n    }\r\n  }\r\n);\r\n","import { UseRequestProvider } from \"ahooks\";\r\nimport axios from \"axios\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport Routes from \"./Routes\";\r\nimport \"./boot\";\r\n\r\nReactDOM.render(\r\n  <UseRequestProvider\r\n    value={{\r\n      requestMethod: (param) => axios(param),\r\n    }}\r\n  >\r\n    <Routes />\r\n  </UseRequestProvider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}